# Project Chatroom - Architecture & Flow Diagrams

## System Architecture Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              USER INTERFACE                                    â•‘
â•‘                        (React Frontend - Port 5173)                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘   â”‚  EnhancedProjectManagement Component                                    â”‚ â•‘
â•‘   â”‚                                                                          â”‚ â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â•‘
â•‘   â”‚  â”‚   Projects   â”‚  â”‚   Grid/List  â”‚  â”‚  ğŸ’¬ Message  â”‚                 â”‚ â•‘
â•‘   â”‚  â”‚    List      â”‚  â”‚    View      â”‚  â”‚    Button    â”‚                 â”‚ â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â•‘
â•‘   â”‚         â”‚                                    â”‚                          â”‚ â•‘
â•‘   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ â•‘
â•‘   â”‚                          â”‚                                              â”‚ â•‘
â•‘   â”‚                          â–¼                                              â”‚ â•‘
â•‘   â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚ â•‘
â•‘   â”‚        â”‚   ProjectChat Modal Component        â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚                                      â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  Team Chat Header            â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  ğŸ“Š X members  [Update Status]â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  Messages Area               â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  ğŸ‘¤ John Smith    2:30 PM    â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚     Regular message          â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚                              â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  ğŸ‘¤ Sarah Johnson  2:35 PM   â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  ğŸ”µ Status Update            â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  Progress: 50%               â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]          â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚ Message Input Area           â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â”‚ [Type a message...] [Send]   â”‚   â”‚                       â”‚ â•‘
â•‘   â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                       â”‚ â•‘
â•‘   â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ â•‘
â•‘   â”‚                                                                         â”‚ â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                    â”‚                                          â•‘
â•‘          API Service (api.ts)  WebSocket Service (socket.ts)                â•‘
â•‘               â”‚                         â”‚                                     â•‘
â•‘               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â•‘
â•‘                           â”‚                                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                          NETWORK COMMUNICATION                                 â•‘
â•‘                   (HTTP & WebSocket - Port 5000)                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                           BACKEND SERVER                                      â•‘
â•‘                      (Node.js/Express - Port 5000)                            â•‘
â•‘                                                                                â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘   â”‚  Express Server + Socket.io Server                                  â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â•‘
â•‘   â”‚  â”‚  API Routes (projectChat.js)                               â”‚   â”‚  â•‘
â•‘   â”‚  â”‚                                                             â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  GET  /api/project-chat/:projectId                        â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  POST /api/project-chat/:projectId/message                â”‚   â”‚  â•‘
â•‘   â”‚  â”‚                                                             â”‚   â”‚  â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â•‘
â•‘   â”‚  â”‚  Middleware Stack                                          â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - auth.js (JWT Verification)                             â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - authorize (Role Check)                                 â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - CORS & Body Parser                                     â”‚   â”‚  â•‘
â•‘   â”‚  â”‚                                                             â”‚   â”‚  â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â•‘
â•‘   â”‚  â”‚  Socket.io Room Management                                 â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - join-project: socket.join('project-{id}')              â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - leave-project: socket.leave('project-{id}')            â”‚   â”‚  â•‘
â•‘   â”‚  â”‚  - broadcast: io.to('project-{id}').emit(...)            â”‚   â”‚  â•‘
â•‘   â”‚  â”‚                                                             â”‚   â”‚  â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                    â”‚                                          â•‘
â•‘                       Queries & Operations                                    â•‘
â•‘                                    â”‚                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                            DATA LAYER                                          â•‘
â•‘                      (MongoDB - Local/Cloud)                                   â•‘
â•‘                                                                                â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘   â”‚  ProjectChat Collection                                             â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  {                                                                 â”‚  â•‘
â•‘   â”‚    _id: ObjectId,                                                 â”‚  â•‘
â•‘   â”‚    project: ObjectId (â†’ Project._id),                            â”‚  â•‘
â•‘   â”‚    messages: [                                                    â”‚  â•‘
â•‘   â”‚      {                                                            â”‚  â•‘
â•‘   â”‚        sender: ObjectId (â†’ User._id),                           â”‚  â•‘
â•‘   â”‚        content: String,                                         â”‚  â•‘
â•‘   â”‚        messageType: 'message'|'status_update'|'file_share',     â”‚  â•‘
â•‘   â”‚        statusUpdate: { oldStatus, newStatus, progress },        â”‚  â•‘
â•‘   â”‚        timestamp: Date,                                         â”‚  â•‘
â•‘   â”‚        readBy: [{ user: ObjectId, readAt: Date }]              â”‚  â•‘
â•‘   â”‚      }, ...                                                      â”‚  â•‘
â•‘   â”‚    ],                                                             â”‚  â•‘
â•‘   â”‚    participants: [ObjectId],                                     â”‚  â•‘
â•‘   â”‚    isActive: Boolean,                                            â”‚  â•‘
â•‘   â”‚    createdAt: Date,                                              â”‚  â•‘
â•‘   â”‚    updatedAt: Date                                               â”‚  â•‘
â•‘   â”‚  }                                                                â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  Indexes:                                                         â”‚  â•‘
â•‘   â”‚  - { project: 1, createdAt: -1 }                                 â”‚  â•‘
â•‘   â”‚  - { 'messages.timestamp': -1 }                                  â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                                                â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘   â”‚  Project Collection (Updated by Chat)                              â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â”‚  When status_update message sent:                                 â”‚  â•‘
â•‘   â”‚  - Update: project.status = new status                           â”‚  â•‘
â•‘   â”‚  - Update: project.progress = progress %                         â”‚  â•‘
â•‘   â”‚                                                                     â”‚  â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Message Flow Diagram

### 1. User Sends a Regular Message

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Types Text â”‚
â”‚  "Hello Team!"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProjectChat Component           â”‚
â”‚  - Captures input                â”‚
â”‚  - Validates content             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Service (api.ts)            â”‚
â”‚  POST /project-chat/:id/message  â”‚
â”‚  {                               â”‚
â”‚    content: "Hello Team!",       â”‚
â”‚    messageType: "message"        â”‚
â”‚  }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (HTTP Request with Bearer Token)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Route Handler           â”‚
â”‚  - Verify JWT token              â”‚
â”‚  - Check project membership      â”‚
â”‚  - Validate content              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProjectChat Model               â”‚
â”‚  - Create message object         â”‚
â”‚  - Add to messages array         â”‚
â”‚  - Set timestamp & sender        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB (Save)                  â”‚
â”‚  - Insert message into DB        â”‚
â”‚  - Update collection             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Socket.io Broadcast             â”‚
â”‚  io.to('project-ID').emit(       â”‚
â”‚    'new-project-message',        â”‚
â”‚    { projectId, message }        â”‚
â”‚  )                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (WebSocket Event)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All Connected Team Members      â”‚
â”‚  - Receive Socket event          â”‚
â”‚  - Update UI immediately         â”‚
â”‚  - Message appears in chat       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. User Updates Project Status

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Clicks "Update Status" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status Update Modal Opens               â”‚
â”‚  - Select status: [Planning â–¼]           â”‚
â”‚  - Set progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 50%         â”‚
â”‚  - Click "Update"                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Service (api.ts)                    â”‚
â”‚  POST /project-chat/:id/message          â”‚
â”‚  {                                       â”‚
â”‚    content: "Updated status to Active",  â”‚
â”‚    messageType: "status_update",         â”‚
â”‚    statusUpdate: {                       â”‚
â”‚      newStatus: "active",                â”‚
â”‚      progress: 50                        â”‚
â”‚    }                                     â”‚
â”‚  }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (HTTP Request)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Route Handler                   â”‚
â”‚  - Verify JWT token                      â”‚
â”‚  - Check auth (admin/hr only)            â”‚
â”‚  - Create status_update message          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Save Chat   â”‚  â”‚ Update Project Docs  â”‚
â”‚  Message     â”‚  â”‚ - status: "active"   â”‚
â”‚              â”‚  â”‚ - progress: 50       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB (Save All Updates)              â”‚
â”‚  - ProjectChat.messages += new message   â”‚
â”‚  - Project.status = "active"             â”‚
â”‚  - Project.progress = 50                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Socket.io Broadcast                     â”‚
â”‚  - 'new-project-message' event           â”‚
â”‚  - Message with status update            â”‚
â”‚  - Includes progress bar data            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (WebSocket)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Team Members UI Updates                 â”‚
â”‚  - See status update message             â”‚
â”‚  - Progress bar visible                  â”‚
â”‚  - Project list shows new status         â”‚
â”‚  - Refresh shows updated progress        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Real-time Communication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REAL-TIME SYNC                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  User A                          Network                  User B       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Sending    â”‚â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”‚  Receiving   â”‚ â”‚
â”‚  â”‚   Message    â”‚     â”‚                       â”‚     â”‚   Message    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                       â”‚                       â”‚                       â”‚
â”‚                       â–¼                       â–¼                       â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                   â”‚    HTTP POST Request            â”‚                â”‚
â”‚                   â”‚ /api/project-chat/ID/message    â”‚                â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                               â”‚                                       â”‚
â”‚                               â–¼                                       â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                   â”‚   Backend Processing            â”‚                â”‚
â”‚                   â”‚ - Validate                      â”‚                â”‚
â”‚                   â”‚ - Save to DB                    â”‚                â”‚
â”‚                   â”‚ - Broadcast via Socket.io       â”‚                â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                               â”‚                                       â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                â”‚                             â”‚                       â”‚
â”‚                â–¼                             â–¼                       â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚        â”‚ Socket.io Event      â”‚     â”‚ Socket.io Event      â”‚        â”‚
â”‚        â”‚ 'new-project-message'â”‚     â”‚ 'new-project-message'â”‚        â”‚
â”‚        â”‚ (project-ID room)    â”‚     â”‚ (project-ID room)    â”‚        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                   â”‚                          â”‚                      â”‚
â”‚                   â–¼                          â–¼                      â”‚
â”‚           React State Update             React State Update         â”‚
â”‚           setMessages(prev =>             setMessages(prev =>      â”‚
â”‚             [...prev, message]              [...prev, message]     â”‚
â”‚           )                               )                        â”‚
â”‚                   â”‚                          â”‚                      â”‚
â”‚                   â–¼                          â–¼                      â”‚
â”‚           Component Re-render           Component Re-render        â”‚
â”‚           Message appears in             Message appears in       â”‚
â”‚           User A's chat                  User B's chat            â”‚
â”‚                   â”‚                          â”‚                      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                  â”‚                                  â”‚
â”‚                                  â–¼                                  â”‚
â”‚                        Both users see message                      â”‚
â”‚                    In real-time (<100ms latency)                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE RELATIONSHIPS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚      Project Collection      â”‚                                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                      â”‚
â”‚  â”‚  _id                         â”‚                                      â”‚
â”‚  â”‚  title                       â”‚                                      â”‚
â”‚  â”‚  description                 â”‚                                      â”‚
â”‚  â”‚  status â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                      â”‚
â”‚  â”‚  progress â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                                      â”‚
â”‚  â”‚  createdBy â†’ User._id  â”‚  â”‚  â”‚                                      â”‚
â”‚  â”‚  projectManager â†’ User â”‚  â”‚  â”‚                                      â”‚
â”‚  â”‚  teamMembers: [User]   â”‚  â”‚  â”‚                                      â”‚
â”‚  â”‚  ...                   â”‚  â”‚  â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚         â”‚                    â”‚  â”‚                                      â”‚
â”‚         â”‚ (referenced by)    â”‚  â”‚                                      â”‚
â”‚         â”‚                    â”‚  â”‚ (updated by)                        â”‚
â”‚         â”‚                    â”‚  â”‚                                      â”‚
â”‚         â–¼                    â”‚  â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  ProjectChat Collection      â”‚                                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                      â”‚
â”‚  â”‚  _id                         â”‚                                      â”‚
â”‚  â”‚  project â†’ Project._id â—„â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚  â”‚  messages: [                 â”‚                                      â”‚
â”‚  â”‚    {                         â”‚                                      â”‚
â”‚  â”‚      _id                     â”‚                                      â”‚
â”‚  â”‚      sender â†’ User._id â—„â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚      content                 â”‚                                      â”‚
â”‚  â”‚      messageType             â”‚                                      â”‚
â”‚  â”‚      statusUpdate            â”‚â—„â”€â”€â”€â”˜                                 â”‚
â”‚  â”‚      timestamp               â”‚    (updated on                       â”‚
â”‚  â”‚      readBy: []              â”‚     status_update)                   â”‚
â”‚  â”‚    },                        â”‚                                      â”‚
â”‚  â”‚    ...                       â”‚                                      â”‚
â”‚  â”‚  ]                           â”‚                                      â”‚
â”‚  â”‚  participants: [User._id]    â”‚                                      â”‚
â”‚  â”‚  isActive                    â”‚                                      â”‚
â”‚  â”‚  createdAt / updatedAt       â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚         â”‚                                                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                         â”‚                                         â”‚  â”‚
â”‚                         â–¼                                         â–¼  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      User Collection         â”‚                    â”‚ (via refs)   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                  â”‚ â”‚
â”‚  â”‚  _id                         â”‚                    firstName      â”‚ â”‚
â”‚  â”‚  firstName                   â”‚                    lastName       â”‚ â”‚
â”‚  â”‚  lastName                    â”‚                    email          â”‚ â”‚
â”‚  â”‚  email                       â”‚                    _id            â”‚ â”‚
â”‚  â”‚  role                        â”‚                                  â”‚ â”‚
â”‚  â”‚  ...                         â”‚                    (populate()    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     in queries)   â”‚ â”‚
â”‚                                                                     â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request/Response Cycle Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUEST/RESPONSE CYCLE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  STEP 1: CLIENT REQUEST                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ POST /api/project-chat/proj123/message HTTP/1.1                â”‚  â”‚
â”‚  â”‚ Host: localhost:5000                                           â”‚  â”‚
â”‚  â”‚ Authorization: Bearer eyJhbGciOiJIUzI1NiIs...                â”‚  â”‚
â”‚  â”‚ Content-Type: application/json                               â”‚  â”‚
â”‚  â”‚ Content-Length: 123                                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ {                                                              â”‚  â”‚
â”‚  â”‚   "content": "Hello team!",                                   â”‚  â”‚
â”‚  â”‚   "messageType": "message"                                    â”‚  â”‚
â”‚  â”‚ }                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚  STEP 2: MIDDLEWARE PROCESSING                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. CORS Check: âœ… Origin accepted                             â”‚  â”‚
â”‚  â”‚ 2. Body Parser: âœ… JSON parsed                                â”‚  â”‚
â”‚  â”‚ 3. Auth Middleware:                                           â”‚  â”‚
â”‚  â”‚    - Extract token from header                                â”‚  â”‚
â”‚  â”‚    - Verify JWT signature                                     â”‚  â”‚
â”‚  â”‚    - Decode user ID                                           â”‚  â”‚
â”‚  â”‚    - âœ… User authenticated                                    â”‚  â”‚
â”‚  â”‚ 4. Route Handler:                                             â”‚  â”‚
â”‚  â”‚    - Check project exists                                     â”‚  â”‚
â”‚  â”‚    - âœ… Verify user in project.teamMembers                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚  STEP 3: BUSINESS LOGIC                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Find ProjectChat for project                               â”‚  â”‚
â”‚  â”‚ 2. Create message object:                                      â”‚  â”‚
â”‚  â”‚    {                                                            â”‚  â”‚
â”‚  â”‚      _id: new ObjectId(),                                      â”‚  â”‚
â”‚  â”‚      sender: userId,                                           â”‚  â”‚
â”‚  â”‚      content: "Hello team!",                                   â”‚  â”‚
â”‚  â”‚      messageType: "message",                                   â”‚  â”‚
â”‚  â”‚      timestamp: new Date(),                                    â”‚  â”‚
â”‚  â”‚      readBy: []                                                â”‚  â”‚
â”‚  â”‚    }                                                            â”‚  â”‚
â”‚  â”‚ 3. Push to messages array                                       â”‚  â”‚
â”‚  â”‚ 4. Save to MongoDB                                             â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚  STEP 4: REAL-TIME BROADCAST                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Socket.io Emission:                                           â”‚  â”‚
â”‚  â”‚ io.to('project-proj123').emit('new-project-message', {       â”‚  â”‚
â”‚  â”‚   projectId: 'proj123',                                       â”‚  â”‚
â”‚  â”‚   message: {                                                  â”‚  â”‚
â”‚  â”‚     _id: 'msg456',                                            â”‚  â”‚
â”‚  â”‚     sender: {                                                 â”‚  â”‚
â”‚  â”‚       _id: 'user123',                                         â”‚  â”‚
â”‚  â”‚       firstName: 'John',                                      â”‚  â”‚
â”‚  â”‚       lastName: 'Smith'                                       â”‚  â”‚
â”‚  â”‚     },                                                         â”‚  â”‚
â”‚  â”‚     content: 'Hello team!',                                   â”‚  â”‚
â”‚  â”‚     messageType: 'message',                                   â”‚  â”‚
â”‚  â”‚     timestamp: '2024-01-15T10:30:00Z'                         â”‚  â”‚
â”‚  â”‚   }                                                            â”‚  â”‚
â”‚  â”‚ })                                                             â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ Broadcasting to room: project-proj123                         â”‚  â”‚
â”‚  â”‚ Connected sockets: 5 (Team members online)                    â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚  STEP 5: SERVER RESPONSE                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ HTTP/1.1 200 OK                                               â”‚  â”‚
â”‚  â”‚ Content-Type: application/json                               â”‚  â”‚
â”‚  â”‚ Content-Length: 234                                           â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ {                                                              â”‚  â”‚
â”‚  â”‚   "_id": "msg456",                                            â”‚  â”‚
â”‚  â”‚   "sender": {                                                 â”‚  â”‚
â”‚  â”‚     "_id": "user123",                                         â”‚  â”‚
â”‚  â”‚     "firstName": "John",                                      â”‚  â”‚
â”‚  â”‚     "lastName": "Smith"                                       â”‚  â”‚
â”‚  â”‚   },                                                           â”‚  â”‚
â”‚  â”‚   "content": "Hello team!",                                   â”‚  â”‚
â”‚  â”‚   "messageType": "message",                                   â”‚  â”‚
â”‚  â”‚   "timestamp": "2024-01-15T10:30:00Z"                         â”‚  â”‚
â”‚  â”‚ }                                                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ Status: 200 OK âœ…                                             â”‚  â”‚
â”‚  â”‚ Time: 42ms                                                    â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚  STEP 6: CLIENT UI UPDATE (via Socket.io)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ All Team Members Receive:                                    â”‚  â”‚
â”‚  â”‚ Event: 'new-project-message'                                 â”‚  â”‚
â”‚  â”‚ Data: { projectId: 'proj123', message: {...} }               â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ React State Update:                                           â”‚  â”‚
â”‚  â”‚ setMessages(prev => [...prev, message])                      â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ Component Re-render:                                          â”‚  â”‚
â”‚  â”‚ - Add message to messages list                                â”‚  â”‚
â”‚  â”‚ - Scroll to bottom                                            â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚ Visual Result:                                                â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚ â”‚ ğŸ‘¤ John Smith        10:30 AM       â”‚                      â”‚  â”‚
â”‚  â”‚ â”‚ Hello team!                         â”‚                      â”‚  â”‚
â”‚  â”‚ â”‚                                      â”‚                      â”‚  â”‚
â”‚  â”‚ â”‚ âœ… Message appears instantly        â”‚                      â”‚  â”‚
â”‚  â”‚ â”‚    (< 500ms round trip)             â”‚                      â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REACT STATE MANAGEMENT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ProjectChat Component State:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  const [messages, setMessages] = useState<Message[]>([])       â”‚  â”‚
â”‚  â”‚  â†“                                                              â”‚  â”‚
â”‚  â”‚  Messages from API                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚  â”‚ {_id, sender, content, type,..}  â”‚                         â”‚  â”‚
â”‚  â”‚  â”‚ {_id, sender, content, type,..}  â”‚                         â”‚  â”‚
â”‚  â”‚  â”‚ {_id, sender, content, type,..}  â”‚                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  const [newMessage, setNewMessage] = useState('')              â”‚  â”‚
â”‚  â”‚  â†“                                                              â”‚  â”‚
â”‚  â”‚  User Input                                                    â”‚  â”‚
â”‚  â”‚  "Type a message..."                                           â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  const [participants, setParticipants] = useState<any[]>([])   â”‚  â”‚
â”‚  â”‚  â†“                                                              â”‚  â”‚
â”‚  â”‚  Team Members List                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚  â”‚ {_id, firstName, lastName, email}â”‚                         â”‚  â”‚
â”‚  â”‚  â”‚ {_id, firstName, lastName, email}â”‚                         â”‚  â”‚
â”‚  â”‚  â”‚ {_id, firstName, lastName, email}â”‚                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  const [showStatusUpdate, setShowStatusUpdate] = useState(false)â”‚  â”‚
â”‚  â”‚  â†“                                                              â”‚  â”‚
â”‚  â”‚  Status Update Modal Visibility                               â”‚  â”‚
â”‚  â”‚  false / true                                                  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  const [statusUpdate, setStatusUpdate] = useState({...})       â”‚  â”‚
â”‚  â”‚  â†“                                                              â”‚  â”‚
â”‚  â”‚  Status Update Form Data                                       â”‚  â”‚
â”‚  â”‚  { status: 'active', progress: 50 }                            â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  Event Flow:                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  User Types  â”€â”€â”€â”€â”                                              â”‚  â”‚
â”‚  â”‚                  â–¼                                              â”‚  â”‚
â”‚  â”‚            onChange Event                                       â”‚  â”‚
â”‚  â”‚            setNewMessage(value)                                â”‚  â”‚
â”‚  â”‚                  â”‚                                              â”‚  â”‚
â”‚  â”‚                  â–¼                                              â”‚  â”‚
â”‚  â”‚            messages array unchanged                            â”‚  â”‚
â”‚  â”‚            Re-render input field                               â”‚  â”‚
â”‚  â”‚                  â”‚                                              â”‚  â”‚
â”‚  â”‚                  â–¼                                              â”‚  â”‚
â”‚  â”‚  User Presses Enter â”€â”€â”€â”€â”                                      â”‚  â”‚
â”‚  â”‚                         â–¼                                       â”‚  â”‚
â”‚  â”‚                   onSubmit Event                                â”‚  â”‚
â”‚  â”‚                   1. sendMessage()                              â”‚  â”‚
â”‚  â”‚                   2. API POST request                           â”‚  â”‚
â”‚  â”‚                   3. Clear newMessage state                     â”‚  â”‚
â”‚  â”‚                         â”‚                                       â”‚  â”‚
â”‚  â”‚                         â–¼                                       â”‚  â”‚
â”‚  â”‚                   Socket.io event received                      â”‚  â”‚
â”‚  â”‚                   'new-project-message'                         â”‚  â”‚
â”‚  â”‚                         â”‚                                       â”‚  â”‚
â”‚  â”‚                         â–¼                                       â”‚  â”‚
â”‚  â”‚                   setMessages(prev =>                           â”‚  â”‚
â”‚  â”‚                     [...prev, newMessage]                       â”‚  â”‚
â”‚  â”‚                   )                                             â”‚  â”‚
â”‚  â”‚                         â”‚                                       â”‚  â”‚
â”‚  â”‚                         â–¼                                       â”‚  â”‚
â”‚  â”‚                   Component Re-renders                          â”‚  â”‚
â”‚  â”‚                   Message added to display                      â”‚  â”‚
â”‚  â”‚                   ScrollToBottom triggered                      â”‚  â”‚
â”‚  â”‚                   UI updates instantly                          â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRODUCTION DEPLOYMENT                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CLIENT TIER                                  â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  â””â”€ React SPA (Vite)                                            â”‚  â”‚
â”‚  â”‚     â””â”€ Served on: http://localhost:5173 (dev)                  â”‚  â”‚
â”‚  â”‚     â””â”€ Served on: Production URL (prod)                        â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚     Components:                                                â”‚  â”‚
â”‚  â”‚     â”œâ”€ ProjectChat.tsx                                         â”‚  â”‚
â”‚  â”‚     â”œâ”€ EnhancedProjectManagement.tsx                          â”‚  â”‚
â”‚  â”‚     â”œâ”€ api.ts (API Service)                                    â”‚  â”‚
â”‚  â”‚     â””â”€ socket.ts (WebSocket Client)                           â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚          HTTP (REST)     â”‚     WebSocket                              â”‚
â”‚                          â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   APPLICATION TIER                             â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  Node.js + Express Server                                      â”‚  â”‚
â”‚  â”‚  Port: 5000 (default)                                          â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Express App                                                 â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Routes (projectChat.js)                                â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Middleware (auth.js)                                   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Models (ProjectChat.js)                                â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Error Handling                                         â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â””â”€ Socket.io Server                                          â”‚  â”‚
â”‚  â”‚     â”œâ”€ Room Management                                        â”‚  â”‚
â”‚  â”‚     â”œâ”€ Event Broadcasting                                     â”‚  â”‚
â”‚  â”‚     â””â”€ Connection Pool                                        â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â”‚ TCP/IP                                     â”‚
â”‚                          â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    DATA TIER                                    â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  MongoDB Server                                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ Database: HR System                                         â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Collection: projects                                    â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Collection: projectchats                                â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Collection: users                                       â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ ...other collections                                    â”‚  â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â””â”€ Indexes                                                    â”‚  â”‚
â”‚  â”‚     â”œâ”€ { project: 1, createdAt: -1 }                          â”‚  â”‚
â”‚  â”‚     â””â”€ { 'messages.timestamp': -1 }                           â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  SCALING NOTES:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ Database: Can handle millions of messages with proper indexes â”‚  â”‚
â”‚  â”‚ â€¢ Socket.io: Can handle thousands of concurrent connections    â”‚  â”‚
â”‚  â”‚ â€¢ Horizontal scaling: Use Node.js cluster or multiple servers  â”‚  â”‚
â”‚  â”‚ â€¢ Load balancing: nginx/HAProxy for distributing traffic       â”‚  â”‚
â”‚  â”‚ â€¢ Real-time sync: Redis adapter for multi-server Socket.io     â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**For more information, see related documentation files:**
- `PROJECT_CHATROOM_GUIDE.md` - Technical details
- `PROJECT_CHATROOM_QUICKSTART.md` - User guide
- `PROJECT_CHATROOM_DEVELOPER_GUIDE.md` - Code examples

**Last Updated**: December 2024
**Version**: 1.0
